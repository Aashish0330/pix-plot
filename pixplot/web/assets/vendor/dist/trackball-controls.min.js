!function(){const e={type:"change"},t={type:"start"},o={type:"end"};THREE.TrackballControls=class extends THREE.EventDispatcher{constructor(n,c){super(),void 0===c&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),c===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const s=this,a={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=n,this.domElement=c,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN},this.target=new THREE.Vector3;const i=new THREE.Vector3;let r=1,p=a.NONE,d=a.NONE,m=0,E=0,h=0;const u=new THREE.Vector3,l=new THREE.Vector2,g=new THREE.Vector2,y=new THREE.Vector3,b=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector2,v=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const e=s.domElement.getBoundingClientRect(),t=s.domElement.ownerDocument.documentElement;s.screen.left=e.left+window.pageXOffset-t.clientLeft,s.screen.top=e.top+window.pageYOffset-t.clientTop,s.screen.width=e.width,s.screen.height=e.height};const f=function(){const e=new THREE.Vector2;return function(t,o){return e.set((t-s.screen.left)/s.screen.width,(o-s.screen.top)/s.screen.height),e}}(),O=function(){const e=new THREE.Vector2;return function(t,o){return e.set((t-.5*s.screen.width-s.screen.left)/(.5*s.screen.width),(s.screen.height+2*(s.screen.top-o))/s.screen.width),e}}();function j(e){if(!1!==s.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(p===a.NONE)switch(e.button){case s.mouseButtons.LEFT:p=a.ROTATE;break;case s.mouseButtons.MIDDLE:p=a.ZOOM;break;case s.mouseButtons.RIGHT:p=a.PAN;break;default:p=a.NONE}const o=d!==a.NONE?d:p;o!==a.ROTATE||s.noRotate?o!==a.ZOOM||s.noZoom?o!==a.PAN||s.noPan||(T.copy(f(e.pageX,e.pageY)),v.copy(T)):(b.copy(f(e.pageX,e.pageY)),w.copy(b)):(g.copy(O(e.pageX,e.pageY)),l.copy(g)),s.domElement.ownerDocument.addEventListener("pointermove",R),s.domElement.ownerDocument.addEventListener("pointerup",H),s.dispatchEvent(t)}(e)}}function R(e){if(!1!==s.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===s.enabled)return;const t=d!==a.NONE?d:p;t!==a.ROTATE||s.noRotate?t!==a.ZOOM||s.noZoom?t!==a.PAN||s.noPan||v.copy(f(e.pageX,e.pageY)):w.copy(f(e.pageX,e.pageY)):(l.copy(g),g.copy(O(e.pageX,e.pageY)))}(e)}}function H(e){if(!1!==s.enabled)switch(e.pointerType){case"mouse":case"pen":!1!==s.enabled&&(p=a.NONE,s.domElement.ownerDocument.removeEventListener("pointermove",R),s.domElement.ownerDocument.removeEventListener("pointerup",H),s.dispatchEvent(o))}}function L(e){!1!==s.enabled&&(window.removeEventListener("keydown",L),d===a.NONE&&(e.code!==s.keys[a.ROTATE]||s.noRotate?e.code!==s.keys[a.ZOOM]||s.noZoom?e.code!==s.keys[a.PAN]||s.noPan||(d=a.PAN):d=a.ZOOM:d=a.ROTATE))}function N(){!1!==s.enabled&&(d=a.NONE,window.addEventListener("keydown",L))}function D(e){if(!1!==s.enabled&&!0!==s.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:b.y-=.025*e.deltaY;break;case 1:b.y-=.01*e.deltaY;break;default:b.y-=25e-5*e.deltaY}s.dispatchEvent(t),s.dispatchEvent(o)}}function k(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:p=a.TOUCH_ROTATE,g.copy(O(e.touches[0].pageX,e.touches[0].pageY)),l.copy(g);break;default:p=a.TOUCH_ZOOM_PAN;const t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;E=m=Math.sqrt(t*t+o*o);const n=(e.touches[0].pageX+e.touches[1].pageX)/2,c=(e.touches[0].pageY+e.touches[1].pageY)/2;T.copy(f(n,c)),v.copy(T)}s.dispatchEvent(t)}}function A(e){if(!1!==s.enabled)switch(e.preventDefault(),e.touches.length){case 1:l.copy(g),g.copy(O(e.touches[0].pageX,e.touches[0].pageY));break;default:const t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;E=Math.sqrt(t*t+o*o);const n=(e.touches[0].pageX+e.touches[1].pageX)/2,c=(e.touches[0].pageY+e.touches[1].pageY)/2;v.copy(f(n,c))}}function V(e){if(!1!==s.enabled){switch(e.touches.length){case 0:p=a.NONE;break;case 1:p=a.TOUCH_ROTATE,g.copy(O(e.touches[0].pageX,e.touches[0].pageY)),l.copy(g)}s.dispatchEvent(o)}}function C(e){!1!==s.enabled&&e.preventDefault()}this.rotateCamera=function(){const e=new THREE.Vector3,t=new THREE.Quaternion,o=new THREE.Vector3,n=new THREE.Vector3,c=new THREE.Vector3,a=new THREE.Vector3;return function(){a.set(g.x-l.x,g.y-l.y,0);let i=a.length();i?(u.copy(s.object.position).sub(s.target),o.copy(u).normalize(),n.copy(s.object.up).normalize(),c.crossVectors(n,o).normalize(),n.setLength(g.y-l.y),c.setLength(g.x-l.x),a.copy(n.add(c)),e.crossVectors(a,u).normalize(),i*=s.rotateSpeed,t.setFromAxisAngle(e,i),u.applyQuaternion(t),s.object.up.applyQuaternion(t),y.copy(e),h=i):!s.staticMoving&&h&&(h*=Math.sqrt(1-s.dynamicDampingFactor),u.copy(s.object.position).sub(s.target),t.setFromAxisAngle(y,h),u.applyQuaternion(t),s.object.up.applyQuaternion(t)),l.copy(g)}}(),this.zoomCamera=function(){let e;p===a.TOUCH_ZOOM_PAN?(e=m/E,m=E,s.object.isPerspectiveCamera?u.multiplyScalar(e):s.object.isOrthographicCamera?(s.object.zoom*=e,s.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!=(e=1+(w.y-b.y)*s.zoomSpeed)&&e>0&&(s.object.isPerspectiveCamera?u.multiplyScalar(e):s.object.isOrthographicCamera?(s.object.zoom/=e,s.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),s.staticMoving?b.copy(w):b.y+=(w.y-b.y)*this.dynamicDampingFactor)},this.panCamera=function(){const e=new THREE.Vector2,t=new THREE.Vector3,o=new THREE.Vector3;return function(){if(e.copy(v).sub(T),e.lengthSq()){if(s.object.isOrthographicCamera){const t=(s.object.right-s.object.left)/s.object.zoom/s.domElement.clientWidth,o=(s.object.top-s.object.bottom)/s.object.zoom/s.domElement.clientWidth;e.x*=t,e.y*=o}e.multiplyScalar(u.length()*s.panSpeed),o.copy(u).cross(s.object.up).setLength(e.x),o.add(t.copy(s.object.up).setLength(e.y)),s.object.position.add(o),s.target.add(o),s.staticMoving?T.copy(v):T.add(e.subVectors(v,T).multiplyScalar(s.dynamicDampingFactor))}}}(),this.checkDistances=function(){s.noZoom&&s.noPan||(u.lengthSq()>s.maxDistance*s.maxDistance&&(s.object.position.addVectors(s.target,u.setLength(s.maxDistance)),b.copy(w)),u.lengthSq()<s.minDistance*s.minDistance&&(s.object.position.addVectors(s.target,u.setLength(s.minDistance)),b.copy(w)))},this.update=function(){u.subVectors(s.object.position,s.target),s.noRotate||s.rotateCamera(),s.noZoom||s.zoomCamera(),s.noPan||s.panCamera(),s.object.position.addVectors(s.target,u),s.object.isPerspectiveCamera?(s.checkDistances(),s.object.lookAt(s.target),i.distanceToSquared(s.object.position)>1e-6&&(s.dispatchEvent(e),i.copy(s.object.position))):s.object.isOrthographicCamera?(s.object.lookAt(s.target),(i.distanceToSquared(s.object.position)>1e-6||r!==s.object.zoom)&&(s.dispatchEvent(e),i.copy(s.object.position),r=s.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){p=a.NONE,d=a.NONE,s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.up.copy(s.up0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),u.subVectors(s.object.position,s.target),s.object.lookAt(s.target),s.dispatchEvent(e),i.copy(s.object.position),r=s.object.zoom},this.dispose=function(){s.domElement.removeEventListener("contextmenu",C),s.domElement.removeEventListener("pointerdown",j),s.domElement.removeEventListener("wheel",D),s.domElement.removeEventListener("touchstart",k),s.domElement.removeEventListener("touchend",V),s.domElement.removeEventListener("touchmove",A),s.domElement.ownerDocument.removeEventListener("pointermove",R),s.domElement.ownerDocument.removeEventListener("pointerup",H),window.removeEventListener("keydown",L),window.removeEventListener("keyup",N)},this.domElement.addEventListener("contextmenu",C),this.domElement.addEventListener("pointerdown",j),this.domElement.addEventListener("wheel",D,{passive:!1}),this.domElement.addEventListener("touchstart",k,{passive:!1}),this.domElement.addEventListener("touchend",V),this.domElement.addEventListener("touchmove",A,{passive:!1}),this.domElement.ownerDocument.addEventListener("pointermove",R),this.domElement.ownerDocument.addEventListener("pointerup",H),window.addEventListener("keydown",L),window.addEventListener("keyup",N),this.handleResize(),this.update()}}}();